/*! $FileVersion=1.1.522 */ var transport_mosaic_api_v2_fileVersion = "1.1.522"; 
function Mosaic_API_V2_Transport(){this._transport_api_endpoint_emitter=null;this._url="apis.mcafee.com/mosaic/2.0/{service}/{consumer}/v1/record";this._apikey=null;this._verb="PUT";this._partitionKey=null;this._service=null;this._consumer=null;this._environment=null;this.logInfo("New Mosaic_API_V2_Transport Created")}Mosaic_API_V2_Transport.prototype=ModuleManager.create("transport_template");Mosaic_API_V2_Transport.prototype.constructor=Mosaic_API_V2_Transport;Mosaic_API_V2_Transport.prototype.logInfo=function(a){logInformation("Mosaic_API_V2_Transport: "+a)};Mosaic_API_V2_Transport.prototype.logError=function(a){logError("Mosaic_API_V2_Transport: "+a)};Mosaic_API_V2_Transport.prototype.logWarning=function(a){logWarning("Mosaic_API_V2_Transport: "+a)};Mosaic_API_V2_Transport.prototype._updateURL=function(a,b){this._url=updateStringWithReplacement(this._url,a,b)};Mosaic_API_V2_Transport.prototype.GetVersion=function(){try{return engine.getContentVersion()}catch(a){}};Mosaic_API_V2_Transport.prototype._setup=function(){try{this._apikey=this._config.apikey;if(!this._apikey){this.logError("_setup: Initialize failed, API key not provided");return false}this._partitionKey=engine.getContextId();if(!this._partitionKey){this._partitionKey=generateAlphaNumericString(256)}this._service=this._config.service;if(!this._service){this.logError("_setup: Initialize failed, service not provided");return false}this._consumer=this._config.consumer;if(!this._consumer){this.logError("_setup: Initialize failed, consumer not provided");return false}this._updateURL("{service}",this._service);this._updateURL("{consumer}",this._consumer);this._environment=this._config.environment;if(this._environment!=null&&this._environment!=undefined&&this._environment.length>0){this._url=this._environment+"."+this._url}this._url="https://analytics."+this._url;this._headers={"x-api-key":this._apikey,"content-type":"application/json"};var a={url:this._url,headers:this._headers,verb:this._verb};this._transport_api_endpoint_emitter=ModuleManager.create("transport_api_endpoint");if(!this._transport_api_endpoint_emitter){this.logError("_setup: transport_api_endpoint is not available");return false}var c=this._transport_api_endpoint_emitter.Initialize(this._name,JSON.stringify(this._dictionary),JSON.stringify(a));if(!c){this.logError("_setup: failed to initialize transport_api_endpoint_emitter");return false}this.logInfo("Initialized successfully");return true}catch(b){this.logError("_setup: Exception caught with message "+b.message);return false}};Mosaic_API_V2_Transport.prototype.Uninitialize=function(){this._transport_api_endpoint_emitter=null;this.logInfo("Uninitialized successfully")};Mosaic_API_V2_Transport.prototype._transportLog=function(d,a,b){try{var f="mosaic_api_v2";logTransports(d,f,b,a)}catch(c){this.logError("_transportLog: Exception caught with message: "+c.message)}};Mosaic_API_V2_Transport.prototype.Send=function(c){try{var a=sanitizeJSONData(c);var d=ModuleManager.getSingleton("mappings");var j=d._map(this._dictionary,a,false);var k=this._appendDottedKeys(j);var i=JSON.stringify({Data:k,PartitionKey:this._partitionKey});var b=this._transport_api_endpoint_emitter.Send(i);var h=(b=="200")||(b==200)?true:false;var f=a.hit_event_id;this._transportLog(f,JSON.stringify(k),h);return h}catch(g){this.logError("Send: Failed to send data: "+g.message);return false}};Mosaic_API_V2_Transport.prototype._appendDottedKeys=function(c){var d=["csp_clientid","event_category","event_action","event_label","engagement_interactive","engagement_userinitiated","hit_type","hit_uniqueid","hit_severity","hit_label_1","hit_label_2","device_antimalware_provider_enabled","device_os_type","wss_istrial"];for(var b in d){var a=d[b];if(a in c){c[a.replace(/_/g,".")]=c[a]}}return c};ModuleManager.registerFactory("transport_mosaic_api_v2",Mosaic_API_V2_Transport);
//A2598E29B61DB664DBAC369C2D2250AC1778AD27E3009EF8DF2A2E50437E572BDDBA8477BD7BC80053BAC195F06847900D3DA2DEEBB3322DF543FA7C6596E4F3++