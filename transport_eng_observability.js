/*! $FileVersion=1.1.522 */ var transport_eng_observability_fileVersion = "1.1.522"; 
function ObservabilityTransport(){this._transport_api_endpoint_emitter=null;this._url="https://pl8qcwep6c.execute-api.us-west-2.amazonaws.com/prod_v1/v1/record";this._apikey=null;this._verb="PUT";this._partitionKey=null;this.logInfo("New ObservabilityTransport Created")}ObservabilityTransport.prototype=ModuleManager.create("transport_template");ObservabilityTransport.prototype.constructor=ObservabilityTransport;ObservabilityTransport.prototype.logInfo=function(a){logInformation("ObservabilityTransport: "+a)};ObservabilityTransport.prototype.logError=function(a){logError("ObservabilityTransport: "+a)};ObservabilityTransport.prototype.logWarning=function(a){logWarning("ObservabilityTransport: "+a)};ObservabilityTransport.prototype._updateURL=function(a,b){this._url=updateStringWithReplacement(this._url,a,b)};ObservabilityTransport.prototype.GetVersion=function(){try{return engine.getContentVersion()}catch(a){}};ObservabilityTransport.prototype._setup=function(){try{this._apikey=this._config.apikey;if(!this._apikey){this.logError("ObservabilityTransport:: Initialize failed API key not provided");return false}this._partitionKey=engine.getContextId();if(!this._partitionKey){this._partitionKey=generateAlphaNumericString(256)}this._headers={"x-api-key":this._apikey,"content-type":"application/json"};var a={url:this._url,headers:this._headers,verb:this._verb};this._transport_api_endpoint_emitter=ModuleManager.create("transport_api_endpoint");if(!this._transport_api_endpoint_emitter){this.logError("_setup: transport_api_endpoint is not available");return false}var c=this._transport_api_endpoint_emitter.Initialize(this._name,JSON.stringify(this._dictionary),JSON.stringify(a));if(!c){this.logError("_setup: failed to initialize transport_api_endpoint_emitter");return false}this.logInfo("Initialized successfully");return true}catch(b){this.logError("_setup: Exception caught with message "+b.message);return false}};ObservabilityTransport.prototype.Uninitialize=function(){this._transport_api_endpoint_emitter=null;this.logInfo("Uninitialized successfully")};ObservabilityTransport.prototype._transportLog=function(d,a,b){try{var f="transport_eng_observability";logTransports(d,f,b,a)}catch(c){this.logError("_transportLog: Exception caught with message: "+c.message)}};ObservabilityTransport.prototype.Send=function(c){try{var a=sanitizeJSONData(c);var d=ModuleManager.getSingleton("mappings");var j=d._map(this._dictionary,a,false);var k=this._appendDottedKeys(j);var i=JSON.stringify({Data:k,PartitionKey:this._partitionKey});var b=this._transport_api_endpoint_emitter.Send(i);var h=(b=="200")||(b==200)?true:false;var f=a.hit_event_id;this._transportLog(f,JSON.stringify(k),h);return true}catch(g){this.logError("Send: Failed to send data: "+g.message);return false}};ObservabilityTransport.prototype._appendDottedKeys=function(c){var d=["csp_clientid","event_category","event_action","event_label","engagement_interactive","engagement_userinitiated","hit_type","hit_uniqueid","hit_severity","hit_label_1","hit_label_2","device_antimalware_provider_enabled","device_os_type","wss_istrial"];for(var b in d){var a=d[b];if(a in c){c[a.replace(/_/g,".")]=c[a]}}return c};ModuleManager.registerFactory("transport_eng_observability",ObservabilityTransport);
//9B93061E063DCCAE8ACF14D1E75242FBD09D0DF8BEED2FD72EE393DADD2968145A136C92011008A96CF34F187FC304C2B876B98DC19CE983D0C2ADBFEEC2E70C++